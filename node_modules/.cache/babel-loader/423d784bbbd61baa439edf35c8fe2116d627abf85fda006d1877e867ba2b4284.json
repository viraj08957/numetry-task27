{"ast":null,"code":"import _objectSpread from\"C:/Users/Viraj/Desktop/task 27/login-register-mern/client/numetry-task27/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Viraj/Desktop/task 27/login-register-mern/client/numetry-task27/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Viraj/Desktop/task 27/login-register-mern/client/numetry-task27/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Viraj/Desktop/task 27/login-register-mern/client/numetry-task27/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Link,useNavigate}from\"react-router-dom\";import toast,{Toaster}from\"react-hot-toast\";import{useFormik}from\"formik\";import avatar from\"../assets/profile.png\";import styles from\"../styles/Username.module.css\";import{passwordValidate}from\"../helper/validate\";import useFetch from\"../hooks/fetch.hook\";import{useAuthStore}from\"../store/store\";import{verifyPassword}from\"../helper/helper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Password(){var navigate=useNavigate();var username=useAuthStore(function(state){return state.auth.username;});var _useFetch=useFetch(\"/user/\".concat(username)),_useFetch2=_slicedToArray(_useFetch,1),_useFetch2$=_useFetch2[0],isLoading=_useFetch2$.isLoading,apiData=_useFetch2$.apiData,serverError=_useFetch2$.serverError;var formik=useFormik({initialValues:{password:\"\"},validate:passwordValidate,validateOnBlur:false,validateOnChange:false,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var loginPromise;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:loginPromise=verifyPassword({username:username,password:values.password});toast.promise(loginPromise,{loading:\"Checking...\",success:/*#__PURE__*/_jsx(\"b\",{children:\"login successfully\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"Password not match\"})});loginPromise.then(function(res){var token=res.data.token;localStorage.setItem(\"token\",token);navigate(\"/profile\");}).catch(function(err){return console.log(err);});case 3:case\"end\":return _context.stop();}},_callee);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold \",children:\"Loading...\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.message});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen \",children:/*#__PURE__*/_jsx(\"div\",{className:styles.glass,children:/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-5xl font-bold\",children:[\"Hello \",(apiData===null||apiData===void 0?void 0:apiData.firstName)||username]}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-gray-500 text-center\",children:\"Type your password and enjoy .\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"py-1\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile flex justify-center py-4\",children:/*#__PURE__*/_jsx(\"img\",{className:styles.profile_img,src:(apiData===null||apiData===void 0?void 0:apiData.profile)||avatar,alt:\"avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:styles.textbox,placeholder:\"Password\",name:\"password\"},formik.getFieldProps(\"password\"))),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"Sign in\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"Forgot password\",\" \",/*#__PURE__*/_jsx(Link,{className:\"text-red-500\",to:\"/recovery\",children:\"Recover now\"})]})})]})]})})})]});}","map":{"version":3,"names":["React","Link","useNavigate","toast","Toaster","useFormik","avatar","styles","passwordValidate","useFetch","useAuthStore","verifyPassword","Password","navigate","username","state","auth","isLoading","apiData","serverError","formik","initialValues","password","validate","validateOnBlur","validateOnChange","onSubmit","values","loginPromise","promise","loading","success","error","then","res","token","data","localStorage","setItem","catch","err","console","log","message","glass","firstName","handleSubmit","profile_img","profile","textbox","getFieldProps","btn"],"sources":["C:/Users/Viraj/Desktop/task 27/login-register-mern/client/numetry-task27/src/component/Password.js"],"sourcesContent":["import React from \"react\"\r\nimport { Link, useNavigate } from \"react-router-dom\"\r\nimport toast, { Toaster } from \"react-hot-toast\"\r\nimport { useFormik } from \"formik\"\r\nimport avatar from \"../assets/profile.png\"\r\nimport styles from \"../styles/Username.module.css\"\r\nimport { passwordValidate } from \"../helper/validate\"\r\nimport useFetch from \"../hooks/fetch.hook\"\r\nimport { useAuthStore } from \"../store/store\"\r\nimport { verifyPassword } from \"../helper/helper\"\r\nexport default function Password() {\r\n  const navigate = useNavigate()\r\n  const username = useAuthStore((state) => state.auth.username)\r\n  const [{ isLoading, apiData, serverError }] = useFetch(`/user/${username}`)\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      password: \"\",\r\n    },\r\n    validate: passwordValidate,\r\n    validateOnBlur: false,\r\n    validateOnChange: false,\r\n    onSubmit: async (values) => {\r\n      let loginPromise = verifyPassword({ username, password: values.password })\r\n      toast.promise(loginPromise, {\r\n        loading: \"Checking...\",\r\n        success: <b>login successfully</b>,\r\n        error: <b>Password not match</b>,\r\n      })\r\n      loginPromise\r\n        .then((res) => {\r\n          let { token } = res.data\r\n          localStorage.setItem(\"token\", token)\r\n          navigate(\"/profile\")\r\n        })\r\n        .catch((err) => console.log(err))\r\n    },\r\n  })\r\n  if (isLoading) return <h1 className=\"text-2xl font-semibold \">Loading...</h1>\r\n  if (serverError)\r\n    return <h1 className=\"text-xl text-red-500\">{serverError.message}</h1>\r\n  return (\r\n    <div className=\"container mx-auto\">\r\n      <Toaster position=\"top-center\" reverseOrder={false}></Toaster>\r\n      <div className=\"flex justify-center items-center h-screen \">\r\n        <div className={styles.glass}>\r\n          <div className=\"title flex flex-col items-center\">\r\n            <h4 className=\"text-5xl font-bold\">\r\n              Hello {apiData?.firstName || username}\r\n            </h4>\r\n            <span className=\"py-4 text-xl w-2/3 text-gray-500 text-center\">\r\n              Type your password and enjoy .\r\n            </span>\r\n            <form className=\"py-1\" onSubmit={formik.handleSubmit}>\r\n              <div className=\"profile flex justify-center py-4\">\r\n                <img\r\n                  className={styles.profile_img}\r\n                  src={apiData?.profile || avatar}\r\n                  alt=\"avatar\"\r\n                />\r\n              </div>\r\n              <div className=\"textbox flex flex-col items-center gap-6\">\r\n                <input\r\n                  type=\"password\"\r\n                  className={styles.textbox}\r\n                  placeholder=\"Password\"\r\n                  name=\"password\"\r\n                  {...formik.getFieldProps(\"password\")}\r\n                />\r\n                <button className={styles.btn} type=\"submit\">\r\n                  Sign in\r\n                </button>\r\n              </div>\r\n              <div className=\"text-center py-4\">\r\n                <span className=\"text-gray-500\">\r\n                  Forgot password{\" \"}\r\n                  <Link className=\"text-red-500\" to=\"/recovery\">\r\n                    Recover now\r\n                  </Link>\r\n                </span>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}